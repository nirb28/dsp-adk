id: image_analysis
name: Image Analysis Tool (Azure)
description: Image analysis using Azure Computer Vision API
tool_type: python

parameters:
  - name: image_path
    type: string
    description: Path to the image file to analyze (local file path or URL). Either image_path or image_data must be provided.
    required: false
  
  - name: image_data
    type: string
    description: Base64-encoded image data. Either image_path or image_data must be provided.
    required: false
  
  - name: analysis_type
    type: string
    description: Type of analysis to perform on the image
    required: false
    default: general
    enum:
      - general
      - object_detection
      - text_extraction
      - face_detection
      - image_classification
      - color_analysis
      - quality_assessment

  - name: options
    type: object
    description: Additional options specific to the analysis type
    required: false

returns:
  type: object
  properties:
    success:
      type: boolean
    analysis_type:
      type: string
    image_source:
      type: string
    results:
      type: object
    metadata:
      type: object
    error:
      type: string

implementation:
  module: app.tools.image_analysis
  function: analyze_image
  safe_mode: true

vision_ai:
  # Azure Computer Vision Configuration
  provider: azure
  
  # Azure endpoint URL (get from Azure Portal)
  azure_endpoint: "https://YOUR_RESOURCE_NAME.cognitiveservices.azure.com/"
  
  # API key (use environment variable for security)
  azure_api_key: "${AZURE_VISION_API_KEY}"
  
  # API version
  azure_api_version: "2023-10-01"
  
  # Optional: Separate Face API endpoint for face detection
  # azure_face_endpoint: "https://YOUR_FACE_RESOURCE.cognitiveservices.azure.com/"

metadata:
  version: "1.0.0"
  author: "ADK Team"
  created: "2024-01-16"
  updated: "2024-01-16"
  note: "Azure Computer Vision integration - requires AZURE_VISION_API_KEY environment variable"

jwt_required: false
allowed_groups: []
allowed_roles: []
rate_limit: 50

timeout: 30
retry_count: 1

tags:
  - image
  - analysis
  - vision
  - ai
  - azure
  - production

usage_instructions: |
  Azure Computer Vision integration for production use.
  
  Setup:
  1. Create Azure Computer Vision resource in Azure Portal
  2. Copy endpoint URL and API key
  3. Set environment variable: export AZURE_VISION_API_KEY="your-key"
  4. Update azure_endpoint in this file
  5. Restart the ADK server
  
  Supported analysis types:
  - general: Image info + description + tags
  - object_detection: Detect objects with bounding boxes
  - text_extraction: OCR text extraction
  - face_detection: Face detection with attributes (requires Face API)
  - image_classification: Categorize and tag images
  - color_analysis: Dominant colors and palette
  - quality_assessment: Image quality metrics

component_type: tool
enabled: true
status: ready
version: 1.0.0
